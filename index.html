<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>GMod Loading Debug</title>
    <style>
        /* –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –º–∏–Ω–∏–º—É–º: —Ç–æ–ª—å–∫–æ —Ñ–æ—Ç–æ, –∏–º—è —Ñ–∞–π–ª–∞ –∏ –ø–æ–ª–æ—Å–∫–∞ */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: Arial, sans-serif;
            color: white;
            text-shadow: 1px 1px 2px black;
        }
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            transition: background-image 1s;
            z-index: -2;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.4);
            z-index: -1;
        }
        .panel {
            position: fixed;
            bottom: 20%;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            max-width: 600px;
            background: rgba(0,0,0,0.8);
            padding: 15px 20px;
            border-radius: 8px;
            text-align: center;
        }
        .filename {
            font-size: 1.2rem;
            margin-bottom: 10px;
            word-break: break-word;
        }
        .progress-container {
            width: 100%;
            height: 10px;
            background: rgba(255,255,255,0.2);
            border-radius: 5px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            transition: width 0.2s;
        }
    </style>
</head>
<body>
    <div class="background" id="background"></div>
    <div class="overlay"></div>
    <div class="panel">
        <div class="filename" id="fileName">–û–∂–∏–¥–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞ –æ—Ç GMod...</div>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
    </div>

    <script>
        // ===== –§–û–¢–û–ì–†–ê–§–ò–ò (index1.png - index4.png) =====
        const images = ["index1.png", "index2.png", "index3.png", "index4.png"];
        let bg = document.getElementById('background');
        let idx = 0;
        function nextBg() {
            bg.style.backgroundImage = `url('${images[idx]}')`;
            idx = (idx + 1) % images.length;
        }
        images.forEach(src => new Image().src = src);
        if (images.length) { nextBg(); setInterval(nextBg, 10000); }

        // ===== –≠–õ–ï–ú–ï–ù–¢–´ –ò–ù–¢–ï–†–§–ï–ô–°–ê =====
        const fileNameEl = document.getElementById('fileName');
        const progressBar = document.getElementById('progressBar');

        // ===== –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–´–ô –ü–ï–†–ï–•–í–ê–¢–ß–ò–ö –í–´–ó–û–í–û–í =====
        // –ú—ã —Å–æ–∑–¥–∞—ë–º —Ñ—É–Ω–∫—Ü–∏—é-–ª–æ–≤—É—à–∫—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –í–°–ï –≤—ã–∑–æ–≤—ã
        // –∏ –ø—ã—Ç–∞—Ç—å—Å—è –æ–±–Ω–æ–≤–ª—è—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –µ—Å–ª–∏ —É–∑–Ω–∞—ë—Ç –∑–Ω–∞–∫–æ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.
        function logAndTryUpdate(functionName, args) {
            // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤ —á–∏—Ç–∞–µ–º—ã–π –≤–∏–¥
            const argsArray = Array.from(args);
            const argsStr = argsArray.map(arg => {
                if (typeof arg === 'string') return `"${arg}"`;
                if (typeof arg === 'number') return arg;
                try { return JSON.stringify(arg); } catch(e) { return String(arg); }
            }).join(', ');

            console.log(`üìû GMod –≤—ã–∑–≤–∞–ª: ${functionName}(${argsStr})`);

            // –ü—ã—Ç–∞–µ–º—Å—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å —á–∞—Å—Ç—ã–µ —Å–ª—É—á–∞–∏
            if (args.length === 1) {
                // –ï—Å–ª–∏ –æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç - –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å (—á–∏—Å–ª–æ) –∏–ª–∏ —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—É—Å–∞
                if (typeof args[0] === 'number') {
                    const progress = Math.max(0, Math.min(1, args[0]));
                    progressBar.style.width = (progress * 100) + '%';
                    console.log(`   ‚Üí –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω–æ –∫–∞–∫ –ø—Ä–æ–≥—Ä–µ—Å—Å: ${progress}`);
                } else if (typeof args[0] === 'string') {
                    fileNameEl.innerText = args[0];
                    console.log(`   ‚Üí –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω–æ –∫–∞–∫ —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—É—Å–∞`);
                }
            }
            else if (args.length >= 2) {
                // –ï—Å–ª–∏ –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∏ –ø–µ—Ä–≤—ã–π - —á–∏—Å–ª–æ, –≤—Ç–æ—Ä–æ–π - —Å—Ç—Ä–æ–∫–∞ (–∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç)
                if (typeof args[0] === 'number' && typeof args[1] === 'string') {
                    progressBar.style.width = (Math.max(0, Math.min(1, args[0])) * 100) + '%';
                    fileNameEl.innerText = args[1];
                    console.log(`   ‚Üí –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω–æ –∫–∞–∫ –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ —Ç–µ–∫—Å—Ç`);
                }
                else if (typeof args[0] === 'string' && typeof args[1] === 'number') {
                    fileNameEl.innerText = args[0];
                    progressBar.style.width = (Math.max(0, Math.min(1, args[1])) * 100) + '%';
                    console.log(`   ‚Üí –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω–æ –∫–∞–∫ —Ç–µ–∫—Å—Ç –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å`);
                }
                // –ï—Å–ª–∏ —Ç—Ä–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∏ –≤—Ç–æ—Ä–æ–π - —á–∏—Å–ª–æ (–ø—Ä–æ–≥—Ä–µ—Å—Å) - –≤–µ—Ä–æ—è—Ç–Ω–æ DownloadingFile
                else if (args.length === 3 && typeof args[1] === 'number') {
                    fileNameEl.innerText = String(args[0]);
                    progressBar.style.width = (Math.max(0, Math.min(1, args[1])) * 100) + '%';
                    console.log(`   ‚Üí –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω–æ –∫–∞–∫ DownloadingFile: –∏–º—è –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å`);
                }
            }
        }

        // ===== –°–û–ó–î–ê–Å–ú –ü–ï–†–ï–•–í–ê–¢–ß–ò–ö –î–õ–Ø –í–°–ï–• –í–û–ó–ú–û–ñ–ù–´–• –§–£–ù–ö–¶–ò–ô =====
        // –°–ø–∏—Å–æ–∫ –∏–º—ë–Ω, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è (–∏–∑ –æ–ø—ã—Ç–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)
        const possibleFunctions = [
            'SetLoadingProgress', 'SetStatusText', 'DownloadingFile',
            'UpdateStatus', 'LoadingStarted', 'LoadingFinished',
            'SetProgress', 'SetStatus', 'OnDownload', 'OnProgress'
        ];

        possibleFunctions.forEach(funcName => {
            window[funcName] = function(...args) {
                logAndTryUpdate(funcName, args);
            };
        });

        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –ª—é–±—ã–µ –≤—ã–∑–æ–≤—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–∏–π—Ç–∏
        // —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏, –∏–º—è –∫–æ—Ç–æ—Ä–æ–π –º—ã –Ω–µ —É–≥–∞–¥–∞–ª–∏, –Ω–æ –æ–Ω–∞ –µ—Å—Ç—å –≤ window
        const originalWindow = window;
        window = new Proxy(window, {
            set: function(target, prop, value) {
                target[prop] = value;
                return true;
            },
            get: function(target, prop) {
                if (typeof prop === 'string' && typeof target[prop] === 'undefined') {
                    // –ï—Å–ª–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–æ–π –Ω–µ—Ç - —Å–æ–∑–¥–∞—ë–º –ª–æ–≤—É—à–∫—É –Ω–∞ –ª–µ—Ç—É
                    if (prop.match(/^[a-zA-Z]/)) { // –ø–æ—Ö–æ–∂–µ –Ω–∞ –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏
                        console.log(`‚ö†Ô∏è –ò–≥—Ä–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–∑–≤–∞—Ç—å –ù–ï–ò–ó–í–ï–°–¢–ù–£–Æ —Ñ—É–Ω–∫—Ü–∏—é: ${prop}`);
                        target[prop] = function(...args) {
                            logAndTryUpdate(prop, args);
                        };
                    }
                }
                return target[prop];
            }
        });

        console.log('%cüîç –†–ï–ñ–ò–ú –û–¢–õ–ê–î–ö–ò: –í—Å–µ –≤—ã–∑–æ–≤—ã GMod –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã –≤ –∫–æ–Ω—Å–æ–ª–∏. –ñ–¥—ë–º...', 'font-size:16px; color: yellow; background:black; padding:5px;');
        fileNameEl.innerText = '–û–∂–∏–¥–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞... –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å (F12)';
    </script>
</body>
</html>
